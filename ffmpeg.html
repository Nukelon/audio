<!DOCTYPE html>
<html lang="zh-Hans">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate" />
    <meta http-equiv="Pragma" content="no-cache" />
    <meta http-equiv="Expires" content="0" />
    <title>FFmpeg 工具台 · 音视频操作</title>
    <link rel="stylesheet" href="styles.css?v=20240729b" />
  </head>
  <body class="ffmpeg-page">
    <header>
      <nav class="top-nav" aria-label="页面导航">
        <a class="back-link" href="index.html">← 返回应用选择</a>
      </nav>
      <h1>FFmpeg 工具台</h1>
      <p>
        上传任意文件或文件夹，浏览音视频属性，并通过内置终端直接执行 FFmpeg 指令，所有数据均存储在本地浏览器中。
      </p>
    </header>
    <main>
      <section class="file-manager" aria-label="文件管理">
        <div class="section-header">
          <h2>文件管理</h2>
          <p>支持拖放或选择文件 / 文件夹，展示大小、容器、编码、帧率、码率等信息。</p>
        </div>
        <div class="file-uploader" id="file-drop-zone">
          <input type="file" id="file-input" multiple webkitdirectory directory />
          <label for="file-input" id="file-label">
            <span class="label-main">拖放文件或点击选择</span>
            <span class="label-sub">支持多文件与文件夹上传，ZIP 文件可在当前目录直接解压</span>
          </label>
        </div>
        <div class="file-toolbar" aria-live="polite">
          <div class="breadcrumbs" id="breadcrumbs" aria-label="当前位置"></div>
          <div class="file-status" id="file-status"></div>
          <button type="button" id="go-up-btn" class="ghost-button" disabled>返回上级</button>
        </div>
        <div class="file-table-wrapper table-wrapper">
          <table aria-label="文件列表">
            <thead>
              <tr>
                <th scope="col">名称</th>
                <th scope="col" class="file-size-column">大小</th>
                <th scope="col">容器</th>
                <th scope="col">视频编码</th>
                <th scope="col">音频编码</th>
                <th scope="col">帧率</th>
                <th scope="col">码率</th>
                <th scope="col" class="file-actions-column">操作</th>
              </tr>
            </thead>
            <tbody id="file-table-body"></tbody>
          </table>
          <div class="empty-state" id="file-empty-state">
            <p>尚未添加文件。使用上方按钮或拖放文件到此处。</p>
          </div>
        </div>
      </section>
      <section class="terminal" aria-label="FFmpeg 终端">
        <div class="section-header">
          <h2>FFmpeg 终端</h2>
          <p>
            输入标准 FFmpeg 命令，可使用 <code>.\</code> 或 <code>./</code> 引用上方文件，输出文件将自动保存到文件管理器中。
          </p>
        </div>
        <div class="terminal-output" id="terminal-output" aria-live="polite"></div>
        <form id="terminal-form" autocomplete="off">
          <label class="sr-only" for="terminal-input">输入要执行的命令</label>
          <input
            type="text"
            id="terminal-input"
            name="terminal-input"
            placeholder="例如：ffmpeg -i .\源视频.mp4 .\输出音频.wav"
            required
          />
          <button type="submit" id="terminal-run-btn">执行命令</button>
        </form>
      </section>
    </main>
    <footer>
      <p>所有操作均在浏览器中本地完成，保证数据安全。</p>
    </footer>
    <script type="module" src="ffmpeg-app.js?v=20240729b"></script>
  </body>
</html>
